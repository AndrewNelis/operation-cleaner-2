SETFREQUENCY=10
//JN 25.12.2004
// known issues: If castle is in the right corner, right-side tower may be funnily made
DOORINTERVAL=RAND(7;15)
FLOORHEIGHT=6
BUILDWIDTH=RAND(25;50)

GROUNDLEVEL(BUILDBEGIN;BUILDWIDTH;1)
GOTOLOW(BUILDBEGIN;BUILDWIDTH)
SETX=BUILDBEGIN

MATERIAL=4
SETV1=RAND(2;4)		// floors

DOORTYPE=0
OUTSIDE=0

DOWN(FLOORHEIGHT)	// 2nd basement
BUILDFLOOR(BUILDBEGIN;BUILDWIDTH;Y)

RIGHT(2)	// build the basement bottom
MATERIAL=5
BRIGHT(V2)
LEFT(2)

UP(FLOORHEIGHT)

MATERIAL=7

OUTSIDE=1
DOORTYPE=2
BUILDFLOOR(BUILDBEGIN;BUILDWIDTH;Y)	// 1st floor

OUTSIDE=RAND(2;5)
UP(FLOORHEIGHT)
DOORTYPE=2
OUTSIDE=0
SETV3=BUILDWIDTH
SUBV3(5)

BEGIN	// other floors
	BUILDFLOOR(BUILDBEGIN;BUILDWIDTH;Y)
	MATERIAL=9

	RIGHT(2)
	UP(2)	
	BUP(2)

	RIGHT(V3)
	BUP(2)
	LEFT(V3)

	DOWN(2)
	MATERIAL=7
	LEFT(2)

	UP(FLOORHEIGHT)
REPEAT V1

//BUILDROOF(BUILDBEGIN;BUILDWIDTH;Y)

BUILDFLOOR(BUILDBEGIN;11;Y)

RIGHT(BUILDWIDTH)
LEFT(11)
BUILDFLOOR(X;11;Y)

RIGHT(1)
UP(1)
MATERIAL=8
SETV1=BUILDWIDTH
SUBV1(17)

BLEFT(V1)

DIVV1(2)

BEGIN
	IFBLOCK(8;8)
		BUP(2)
	ENDIF
	LEFT(2)
REPEAT V1

SETX=BUILDBEGIN

RIGHT(2)
UP(1)
MATERIAL=9
BUP(2)
RIGHT(6)
DOWN(1)
MATERIAL=19
BUP(2)
LEFT(7)

MATERIAL=8

UP(FLOORHEIGHT)
BRIGHT(9)
UP(1)
BEGIN
	BUP(1)
	RIGHT(2)
REPEAT 5

DOWN(1)
RIGHT(BUILDWIDTH)
LEFT(21)
BRIGHT(9)

UP(1)
BEGIN
	BUP(1)
	RIGHT(2)
REPEAT 5

DOWN(FLOORHEIGHT)
MATERIAL=9
LEFT(3)
BUP(2)
LEFT(6)
MATERIAL=19
DOWN(1)
BUP(2)
