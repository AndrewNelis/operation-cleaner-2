SETFREQUENCY=25		// foundry
//JN 29.5.2005, 15.6.2005

BUILDWIDTH=RAND(33;63)
FLOORHEIGHT=5
SETX=BUILDBEGIN
GROUNDLEVEL(BUILDBEGIN;BUILDWIDTH;1)
GOTOLOW(BUILDBEGIN;BUILDWIDTH)

ELEVINTERVAL=RAND(10;20)
DOORINTERVAL=RAND(6;10)
DOORTYPE=3

SETV1=RAND(2;5)		// floors
SETV3=RAND(0;10)	// l/r
SETV4=RAND(0;10)	// material
SETV30=BUILDWIDTH
SUBV30(3)

MATERIAL=7	// brick
SETV20=7	// wall
SETV21=8	// floor
SETV22=9	// bg

IFV4(6;10)	// element
	MATERIAL=10
	SETV20=10
	SETV21=11
	SETV22=12
ENDIF

IFV3(6;10)
	RIGHT(V30)
	LEFT(3)
ENDIF

DOWN(FLOORHEIGHT)	// smokestack
MATERIAL=V21
SETV6=V1
ADDV6(3)
MULV6(5)
BUP(V6)
BRIGHT(4)
RIGHT(4)
BUP(V6)

SUBV6(1)
UP(1)
MATERIAL=V22
BEGIN
	LEFT(1)
	BUP(V6)
REPEAT 3

IFV3(6;10)
	MATERIAL=V21
	UPLEFT(2)
	BUP(4)
	DOWNRIGHT(2)
ENDIF

DOWN(1)
RIGHT(2)

IFV3(6;10)
	RIGHT(3)
	LEFT(V30)
ENDIF

SETV5=V30
SUBV5(5)
DIVV5(2)

MATERIAL=4		// basement
BUILDFLOOR(X;V5;Y)

SETV9=V5	// pipe
DIVV9(2)
RIGHT(V9)
MATERIAL=40
BDOWN(2)
LEFT(V9)

MATERIAL=5
RIGHT(2)
BRIGHT(V5)
LEFT(2)

UP(FLOORHEIGHT)

MATERIAL=V20	// normal floors
SETV7=Y

BEGIN
	BUILDFLOOR(X;V5;Y)
	UP(FLOORHEIGHT)
REPEAT V1

SUBV5(4)
RIGHT(2)
BUILDROOF(X;V5;Y)

SETY=V7

RIGHT(V5)
ADDV5(4)
UPLEFT(1)
MATERIAL=21
BUP(4)

DOWNRIGHT(1)		// the tank
DOWN(FLOORHEIGHT)
MATERIAL=5
BRIGHT(V5)
RIGHT(V5)
BUP(5)
LEFT(V5)
MATERIAL=6
BEGIN
	UP(1)
	BRIGHT(V5)
REPEAT 4

SETV7=V1
MULV7(6)

MATERIAL=V22
BEGIN
	UP(1)
	BRIGHT(V5)
REPEAT V7

SUBV7(5)
MATERIAL=V20
BDOWN(V7)
MATERIAL=V21
BRIGHT(V5)
RIGHT(V5)
ADDV7(5)
BDOWN(V7)

DIVV5(2)

DIVV7(6)

BEGIN
	BLEFT(V5)
	DOWN(6)
REPEAT V7
